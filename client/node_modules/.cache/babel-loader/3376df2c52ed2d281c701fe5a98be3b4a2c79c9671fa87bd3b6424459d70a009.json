{"ast":null,"code":"import { __awaiter, __generator, __spreadArray } from \"tslib\";\nimport { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { getChannel } from '../../../utils/getChannel';\nimport { useChatContext } from '../../../context/ChatContext';\nexport var useNotificationMessageNewListener = function (setChannels, customHandler, allowNewMessagesFromUnfilteredChannels) {\n  if (allowNewMessagesFromUnfilteredChannels === void 0) {\n    allowNewMessagesFromUnfilteredChannels = true;\n  }\n  var client = useChatContext('useNotificationMessageNewListener').client;\n  useEffect(function () {\n    var handleEvent = function (event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var channel_1;\n        var _a;\n        return __generator(this, function (_b) {\n          switch (_b.label) {\n            case 0:\n              if (!(customHandler && typeof customHandler === 'function')) return [3 /*break*/, 1];\n              customHandler(setChannels, event);\n              return [3 /*break*/, 3];\n            case 1:\n              if (!(allowNewMessagesFromUnfilteredChannels && ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type))) return [3 /*break*/, 3];\n              return [4 /*yield*/, getChannel({\n                client: client,\n                id: event.channel.id,\n                type: event.channel.type\n              })];\n            case 2:\n              channel_1 = _b.sent();\n              setChannels(function (channels) {\n                return uniqBy(__spreadArray([channel_1], channels, true), 'cid');\n              });\n              _b.label = 3;\n            case 3:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    client.on('notification.message_new', handleEvent);\n    return function () {\n      client.off('notification.message_new', handleEvent);\n    };\n  }, [customHandler]);\n};","map":{"version":3,"names":["__awaiter","__generator","__spreadArray","useEffect","uniqBy","getChannel","useChatContext","useNotificationMessageNewListener","setChannels","customHandler","allowNewMessagesFromUnfilteredChannels","client","handleEvent","event","channel_1","_a","_b","label","channel","type","id","sent","channels","on","off"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/components/ChannelList/hooks/useNotificationMessageNewListener.js"],"sourcesContent":["import { __awaiter, __generator, __spreadArray } from \"tslib\";\nimport { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { getChannel } from '../../../utils/getChannel';\nimport { useChatContext } from '../../../context/ChatContext';\nexport var useNotificationMessageNewListener = function (setChannels, customHandler, allowNewMessagesFromUnfilteredChannels) {\n    if (allowNewMessagesFromUnfilteredChannels === void 0) { allowNewMessagesFromUnfilteredChannels = true; }\n    var client = useChatContext('useNotificationMessageNewListener').client;\n    useEffect(function () {\n        var handleEvent = function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var channel_1;\n            var _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!(customHandler && typeof customHandler === 'function')) return [3 /*break*/, 1];\n                        customHandler(setChannels, event);\n                        return [3 /*break*/, 3];\n                    case 1:\n                        if (!(allowNewMessagesFromUnfilteredChannels && ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type))) return [3 /*break*/, 3];\n                        return [4 /*yield*/, getChannel({\n                                client: client,\n                                id: event.channel.id,\n                                type: event.channel.type,\n                            })];\n                    case 2:\n                        channel_1 = _b.sent();\n                        setChannels(function (channels) { return uniqBy(__spreadArray([channel_1], channels, true), 'cid'); });\n                        _b.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); };\n        client.on('notification.message_new', handleEvent);\n        return function () {\n            client.off('notification.message_new', handleEvent);\n        };\n    }, [customHandler]);\n};\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,WAAW,EAAEC,aAAa,QAAQ,OAAO;AAC7D,SAASC,SAAS,QAAQ,OAAO;AACjC,OAAOC,MAAM,MAAM,eAAe;AAClC,SAASC,UAAU,QAAQ,2BAA2B;AACtD,SAASC,cAAc,QAAQ,8BAA8B;AAC7D,OAAO,IAAIC,iCAAiC,GAAG,SAAAA,CAAUC,WAAW,EAAEC,aAAa,EAAEC,sCAAsC,EAAE;EACzH,IAAIA,sCAAsC,KAAK,KAAK,CAAC,EAAE;IAAEA,sCAAsC,GAAG,IAAI;EAAE;EACxG,IAAIC,MAAM,GAAGL,cAAc,CAAC,mCAAmC,CAAC,CAACK,MAAM;EACvER,SAAS,CAAC,YAAY;IAClB,IAAIS,WAAW,GAAG,SAAAA,CAAUC,KAAK,EAAE;MAAE,OAAOb,SAAS,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;QACtF,IAAIc,SAAS;QACb,IAAIC,EAAE;QACN,OAAOd,WAAW,CAAC,IAAI,EAAE,UAAUe,EAAE,EAAE;UACnC,QAAQA,EAAE,CAACC,KAAK;YACZ,KAAK,CAAC;cACF,IAAI,EAAER,aAAa,IAAI,OAAOA,aAAa,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;cACpFA,aAAa,CAACD,WAAW,EAAEK,KAAK,CAAC;cACjC,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YAC3B,KAAK,CAAC;cACF,IAAI,EAAEH,sCAAsC,KAAK,CAACK,EAAE,GAAGF,KAAK,CAACK,OAAO,MAAM,IAAI,IAAIH,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACI,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;cAC7I,OAAO,CAAC,CAAC,CAAC,WAAWd,UAAU,CAAC;gBACxBM,MAAM,EAAEA,MAAM;gBACdS,EAAE,EAAEP,KAAK,CAACK,OAAO,CAACE,EAAE;gBACpBD,IAAI,EAAEN,KAAK,CAACK,OAAO,CAACC;cACxB,CAAC,CAAC,CAAC;YACX,KAAK,CAAC;cACFL,SAAS,GAAGE,EAAE,CAACK,IAAI,CAAC,CAAC;cACrBb,WAAW,CAAC,UAAUc,QAAQ,EAAE;gBAAE,OAAOlB,MAAM,CAACF,aAAa,CAAC,CAACY,SAAS,CAAC,EAAEQ,QAAQ,EAAE,IAAI,CAAC,EAAE,KAAK,CAAC;cAAE,CAAC,CAAC;cACtGN,EAAE,CAACC,KAAK,GAAG,CAAC;YAChB,KAAK,CAAC;cAAE,OAAO,CAAC,CAAC,CAAC,WAAW;UACjC;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;IAAE,CAAC;;IACLN,MAAM,CAACY,EAAE,CAAC,0BAA0B,EAAEX,WAAW,CAAC;IAClD,OAAO,YAAY;MACfD,MAAM,CAACa,GAAG,CAAC,0BAA0B,EAAEZ,WAAW,CAAC;IACvD,CAAC;EACL,CAAC,EAAE,CAACH,aAAa,CAAC,CAAC;AACvB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}