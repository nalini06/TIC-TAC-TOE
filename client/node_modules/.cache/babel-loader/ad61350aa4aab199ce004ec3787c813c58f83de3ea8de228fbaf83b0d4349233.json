{"ast":null,"code":"import { __awaiter, __generator, __spreadArray } from \"tslib\";\nimport { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { getChannel } from '../../../utils/getChannel';\nimport { useChatContext } from '../../../context/ChatContext';\nexport var useNotificationAddedToChannelListener = function (setChannels, customHandler, allowNewMessagesFromUnfilteredChannels) {\n  if (allowNewMessagesFromUnfilteredChannels === void 0) {\n    allowNewMessagesFromUnfilteredChannels = true;\n  }\n  var client = useChatContext('useNotificationAddedToChannelListener').client;\n  useEffect(function () {\n    var handleEvent = function (event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var channel_1;\n        var _a, _b;\n        return __generator(this, function (_c) {\n          switch (_c.label) {\n            case 0:\n              if (!(customHandler && typeof customHandler === 'function')) return [3 /*break*/, 1];\n              customHandler(setChannels, event);\n              return [3 /*break*/, 3];\n            case 1:\n              if (!(allowNewMessagesFromUnfilteredChannels && ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type))) return [3 /*break*/, 3];\n              return [4 /*yield*/, getChannel({\n                client: client,\n                id: event.channel.id,\n                members: (_b = event.channel.members) === null || _b === void 0 ? void 0 : _b.reduce(function (acc, _a) {\n                  var user = _a.user,\n                    user_id = _a.user_id;\n                  var userId = user_id || (user === null || user === void 0 ? void 0 : user.id);\n                  if (userId) {\n                    acc.push(userId);\n                  }\n                  return acc;\n                }, []),\n                type: event.channel.type\n              })];\n            case 2:\n              channel_1 = _c.sent();\n              setChannels(function (channels) {\n                return uniqBy(__spreadArray([channel_1], channels, true), 'cid');\n              });\n              _c.label = 3;\n            case 3:\n              return [2 /*return*/];\n          }\n        });\n      });\n    };\n\n    client.on('notification.added_to_channel', handleEvent);\n    return function () {\n      client.off('notification.added_to_channel', handleEvent);\n    };\n  }, [customHandler]);\n};","map":{"version":3,"names":["__awaiter","__generator","__spreadArray","useEffect","uniqBy","getChannel","useChatContext","useNotificationAddedToChannelListener","setChannels","customHandler","allowNewMessagesFromUnfilteredChannels","client","handleEvent","event","channel_1","_a","_b","_c","label","channel","type","id","members","reduce","acc","user","user_id","userId","push","sent","channels","on","off"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/components/ChannelList/hooks/useNotificationAddedToChannelListener.js"],"sourcesContent":["import { __awaiter, __generator, __spreadArray } from \"tslib\";\nimport { useEffect } from 'react';\nimport uniqBy from 'lodash.uniqby';\nimport { getChannel } from '../../../utils/getChannel';\nimport { useChatContext } from '../../../context/ChatContext';\nexport var useNotificationAddedToChannelListener = function (setChannels, customHandler, allowNewMessagesFromUnfilteredChannels) {\n    if (allowNewMessagesFromUnfilteredChannels === void 0) { allowNewMessagesFromUnfilteredChannels = true; }\n    var client = useChatContext('useNotificationAddedToChannelListener').client;\n    useEffect(function () {\n        var handleEvent = function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var channel_1;\n            var _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        if (!(customHandler && typeof customHandler === 'function')) return [3 /*break*/, 1];\n                        customHandler(setChannels, event);\n                        return [3 /*break*/, 3];\n                    case 1:\n                        if (!(allowNewMessagesFromUnfilteredChannels && ((_a = event.channel) === null || _a === void 0 ? void 0 : _a.type))) return [3 /*break*/, 3];\n                        return [4 /*yield*/, getChannel({\n                                client: client,\n                                id: event.channel.id,\n                                members: (_b = event.channel.members) === null || _b === void 0 ? void 0 : _b.reduce(function (acc, _a) {\n                                    var user = _a.user, user_id = _a.user_id;\n                                    var userId = user_id || (user === null || user === void 0 ? void 0 : user.id);\n                                    if (userId) {\n                                        acc.push(userId);\n                                    }\n                                    return acc;\n                                }, []),\n                                type: event.channel.type,\n                            })];\n                    case 2:\n                        channel_1 = _c.sent();\n                        setChannels(function (channels) { return uniqBy(__spreadArray([channel_1], channels, true), 'cid'); });\n                        _c.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); };\n        client.on('notification.added_to_channel', handleEvent);\n        return function () {\n            client.off('notification.added_to_channel', handleEvent);\n        };\n    }, [customHandler]);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}