{"ast":null,"code":"import { __assign, __rest, __spreadArray } from \"tslib\";\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport { find } from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'hast-util-find-and-replace';\nimport ReactMarkdown, { uriTransformer } from 'react-markdown';\nimport { u } from 'unist-builder';\nimport { visit } from 'unist-util-visit';\nimport remarkGfm from 'remark-gfm';\nimport uniqBy from 'lodash.uniqby';\nimport clsx from 'clsx';\nexport var isOnlyEmojis = function (text) {\n  if (!text) return false;\n  var noEmojis = text.replace(emojiRegex(), '');\n  var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n  return !noSpace;\n};\nvar allowedMarkups = ['html', 'text', 'br', 'p', 'em', 'strong', 'a', 'ol', 'ul', 'li', 'code', 'pre', 'blockquote', 'del',\n// custom types (tagNames)\n'emoji', 'mention'];\nexport var matchMarkdownLinks = function (message) {\n  var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n  var matches = message.match(regexMdLinks);\n  var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n  var links = matches ? matches.map(function (match) {\n    var i = singleMatch.exec(match);\n    return i && [i[1], i[2]];\n  }) : [];\n  return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n  var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n  var matches = message.match(codeRegex);\n  return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\nfunction formatUrlForDisplay(url) {\n  try {\n    return decodeURIComponent(url).replace(detectHttp, '');\n  } catch (e) {\n    return url;\n  }\n}\nfunction encodeDecode(url) {\n  try {\n    return encodeURI(decodeURIComponent(url));\n  } catch (error) {\n    return url;\n  }\n}\nvar Anchor = function (_a) {\n  var children = _a.children,\n    href = _a.href;\n  var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n  var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n  if (!href || !isEmail && !isUrl) return React.createElement(React.Fragment, null, children);\n  return React.createElement(\"a\", {\n    className: clsx({\n      'str-chat__message-url-link': isUrl\n    }),\n    href: href,\n    rel: 'nofollow noreferrer noopener',\n    target: '_blank'\n  }, children);\n};\nvar Emoji = function (_a) {\n  var children = _a.children;\n  return React.createElement(\"span\", {\n    className: 'inline-text-emoji',\n    \"data-testid\": 'inline-text-emoji'\n  }, children);\n};\nvar Mention = function (_a) {\n  var children = _a.children,\n    mentionedUser = _a.node.mentionedUser;\n  return React.createElement(\"span\", {\n    className: 'str-chat__message-mention',\n    \"data-user-id\": mentionedUser.id\n  }, children);\n};\nexport var markDownRenderers = {\n  a: Anchor,\n  emoji: Emoji,\n  mention: Mention\n};\nexport var emojiMarkdownPlugin = function () {\n  var replace = function (match) {\n    return u('element', {\n      tagName: 'emoji'\n    }, [u('text', match)]);\n  };\n  var transform = function (node) {\n    return findAndReplace(node, emojiRegex(), replace);\n  };\n  return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) {\n  return function () {\n    var mentioned_usernames = mentioned_users.map(function (user) {\n      return user.name || user.id;\n    }).filter(Boolean).map(escapeRegExp);\n    var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) {\n      return \"@\".concat(username);\n    }).join('|'), 'g');\n    var replace = function (match) {\n      var usernameOrId = match.replace('@', '');\n      var user = mentioned_users.find(function (_a) {\n        var id = _a.id,\n          name = _a.name;\n        return name === usernameOrId || id === usernameOrId;\n      });\n      return u('element', {\n        mentionedUser: user,\n        tagName: 'mention'\n      }, [u('text', match)]);\n    };\n    var transform = function (tree) {\n      if (!mentioned_usernames.length) return tree;\n      // handles special cases of mentions where user.name is an e-mail\n      // Remark GFM translates all e-mail-like text nodes to links creating\n      // two separate child nodes \"@\" and \"your.name@as.email\" instead of\n      // keeping it as one text node with value \"@your.name@as.email\"\n      // this piece finds these two separated nodes and merges them together\n      // before \"replace\" function takes over\n      visit(tree, function (node, index, parent) {\n        var _a;\n        if (index === null) return;\n        if (!parent) return;\n        var nextChild = parent.children.at(index + 1);\n        var nextChildHref = (_a = nextChild === null || nextChild === void 0 ? void 0 : nextChild.properties) === null || _a === void 0 ? void 0 : _a.href;\n        if (node.type === 'text' &&\n        // text value has to have @ sign at the end of the string\n        // and no other characters except whitespace can precede it\n        // valid cases:   \"text @\", \"@\", \" @\"\n        // invalid cases: \"text@\", \"@text\",\n        /.?\\s?@$|^@$/.test(node.value) && (nextChildHref === null || nextChildHref === void 0 ? void 0 : nextChildHref.startsWith('mailto:'))) {\n          var newTextValue = node.value.replace(/@$/, '');\n          var username = nextChildHref.replace('mailto:', '');\n          parent.children[index] = u('text', newTextValue);\n          parent.children[index + 1] = u('text', \"@\".concat(username));\n        }\n      });\n      return findAndReplace(tree, mentionedUsersRegex, replace);\n    };\n    return transform;\n  };\n};\nexport var renderText = function (text, mentionedUsers, _a) {\n  var _b = _a === void 0 ? {} : _a,\n    customMarkDownRenderers = _b.customMarkDownRenderers;\n  // take the @ mentions and turn them into markdown?\n  // translate links\n  if (!text) return null;\n  if (text.trim().length === 1) return React.createElement(React.Fragment, null, text);\n  var newText = text;\n  var markdownLinks = matchMarkdownLinks(newText);\n  var codeBlocks = messageCodeBlocks(newText);\n  // extract all valid links/emails within text and replace it with proper markup\n  uniqBy(__spreadArray(__spreadArray([], find(newText, 'email'), true), find(newText, 'url'), true), 'value').forEach(function (_a) {\n    var href = _a.href,\n      type = _a.type,\n      value = _a.value;\n    var linkIsInBlock = codeBlocks.some(function (block) {\n      return block === null || block === void 0 ? void 0 : block.includes(value);\n    });\n    // check if message is already  markdown\n    var noParsingNeeded = markdownLinks && markdownLinks.filter(function (text) {\n      var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n      var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n      if (!strippedHref || !strippedText) return false;\n      return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n    });\n    if (noParsingNeeded.length > 0 || linkIsInBlock) return;\n    try {\n      // special case for mentions:\n      // it could happen that a user's name matches with an e-mail format pattern.\n      // in that case, we check whether the found e-mail is actually a mention\n      // by naively checking for an existence of @ sign in front of it.\n      if (type === 'email' && mentionedUsers) {\n        var emailMatchesWithName = mentionedUsers.some(function (u) {\n          return u.name === value;\n        });\n        if (emailMatchesWithName) {\n          newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n            var isMention = newText.charAt(position - 1) === '@';\n            // in case of mention, we leave the match in its original form,\n            // and we let `mentionsMarkdownPlugin` to do its job\n            return isMention ? match : \"[\".concat(match, \"](\").concat(encodeDecode(href), \")\");\n          });\n          return;\n        }\n      }\n      var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n      newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\".concat(displayLink, \"](\").concat(encodeDecode(href), \")\"));\n    } catch (e) {\n      void e;\n    }\n  });\n  var rehypePlugins = [emojiMarkdownPlugin];\n  if (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) {\n    rehypePlugins.push(mentionsMarkdownPlugin(mentionedUsers));\n  }\n  // TODO: remove in the next major release\n  if (customMarkDownRenderers === null || customMarkDownRenderers === void 0 ? void 0 : customMarkDownRenderers.mention) {\n    var MentionComponent_1 = customMarkDownRenderers['mention'];\n    // eslint-disable-next-line react/display-name\n    customMarkDownRenderers['mention'] = function (_a) {\n      var node = _a.node,\n        rest = __rest(_a, [\"node\"]);\n      return React.createElement(MentionComponent_1\n      // @ts-ignore\n      , __assign({\n        // @ts-ignore\n        mentioned_user: node.mentionedUser,\n        // @ts-ignore\n        node: __assign({\n          mentioned_user: node.mentionedUser\n        }, node)\n      }, rest));\n    };\n  }\n  var rehypeComponents = __assign(__assign({}, markDownRenderers), customMarkDownRenderers);\n  return React.createElement(ReactMarkdown, {\n    allowedElements: allowedMarkups,\n    components: rehypeComponents,\n    rehypePlugins: rehypePlugins,\n    remarkPlugins: [[remarkGfm, {\n      singleTilde: false\n    }]],\n    skipHtml: true,\n    transformLinkUri: function (uri) {\n      return uri.startsWith('app://') ? uri : uriTransformer(uri);\n    },\n    unwrapDisallowed: true\n  }, newText);\n};\nexport function escapeRegExp(text) {\n  return text.replace(/[-[\\]{}()*+?.,/\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\nexport var generateRandomId = nanoid;\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\nexport var getWholeChar = function (str, i) {\n  var code = str.charCodeAt(i);\n  if (Number.isNaN(code)) return '';\n  if (code < 0xd800 || code > 0xdfff) return str.charAt(i);\n  if (0xd800 <= code && code <= 0xdbff) {\n    if (str.length <= i + 1) {\n      throw 'High surrogate without following low surrogate';\n    }\n    var next = str.charCodeAt(i + 1);\n    if (0xdc00 > next || next > 0xdfff) {\n      throw 'High surrogate without following low surrogate';\n    }\n    return str.charAt(i) + str.charAt(i + 1);\n  }\n  if (i === 0) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n  var prev = str.charCodeAt(i - 1);\n  if (0xd800 > prev || prev > 0xdbff) {\n    throw 'Low surrogate without preceding high surrogate';\n  }\n  return '';\n};","map":{"version":3,"names":["__assign","__rest","__spreadArray","React","emojiRegex","find","nanoid","findAndReplace","ReactMarkdown","uriTransformer","u","visit","remarkGfm","uniqBy","clsx","isOnlyEmojis","text","noEmojis","replace","noSpace","allowedMarkups","matchMarkdownLinks","message","regexMdLinks","matches","match","singleMatch","links","map","i","exec","flat","messageCodeBlocks","codeRegex","detectHttp","formatUrlForDisplay","url","decodeURIComponent","e","encodeDecode","encodeURI","error","Anchor","_a","children","href","isEmail","startsWith","isUrl","createElement","Fragment","className","rel","target","Emoji","Mention","mentionedUser","node","id","markDownRenderers","a","emoji","mention","emojiMarkdownPlugin","tagName","transform","mentionsMarkdownPlugin","mentioned_users","mentioned_usernames","user","name","filter","Boolean","escapeRegExp","mentionedUsersRegex","RegExp","username","concat","join","usernameOrId","tree","length","index","parent","nextChild","at","nextChildHref","properties","type","test","value","newTextValue","renderText","mentionedUsers","_b","customMarkDownRenderers","trim","newText","markdownLinks","codeBlocks","forEach","linkIsInBlock","some","block","includes","noParsingNeeded","strippedHref","strippedText","emailMatchesWithName","position","isMention","charAt","displayLink","rehypePlugins","push","MentionComponent_1","rest","mentioned_user","rehypeComponents","allowedElements","components","remarkPlugins","singleTilde","skipHtml","transformLinkUri","uri","unwrapDisallowed","generateRandomId","getWholeChar","str","code","charCodeAt","Number","isNaN","next","prev"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/utils.js"],"sourcesContent":["import { __assign, __rest, __spreadArray } from \"tslib\";\nimport React from 'react';\nimport emojiRegex from 'emoji-regex';\nimport { find } from 'linkifyjs';\nimport { nanoid } from 'nanoid';\nimport { findAndReplace } from 'hast-util-find-and-replace';\nimport ReactMarkdown, { uriTransformer } from 'react-markdown';\nimport { u } from 'unist-builder';\nimport { visit } from 'unist-util-visit';\nimport remarkGfm from 'remark-gfm';\nimport uniqBy from 'lodash.uniqby';\nimport clsx from 'clsx';\nexport var isOnlyEmojis = function (text) {\n    if (!text)\n        return false;\n    var noEmojis = text.replace(emojiRegex(), '');\n    var noSpace = noEmojis.replace(/[\\s\\n]/gm, '');\n    return !noSpace;\n};\nvar allowedMarkups = [\n    'html',\n    'text',\n    'br',\n    'p',\n    'em',\n    'strong',\n    'a',\n    'ol',\n    'ul',\n    'li',\n    'code',\n    'pre',\n    'blockquote',\n    'del',\n    // custom types (tagNames)\n    'emoji',\n    'mention',\n];\nexport var matchMarkdownLinks = function (message) {\n    var regexMdLinks = /\\[([^[]+)\\](\\(.*\\))/gm;\n    var matches = message.match(regexMdLinks);\n    var singleMatch = /\\[([^[]+)\\]\\((.*)\\)/;\n    var links = matches\n        ? matches.map(function (match) {\n            var i = singleMatch.exec(match);\n            return i && [i[1], i[2]];\n        })\n        : [];\n    return links.flat();\n};\nexport var messageCodeBlocks = function (message) {\n    var codeRegex = /```[a-z]*\\n[\\s\\S]*?\\n```|`[a-z]*[\\s\\S]*?`/gm;\n    var matches = message.match(codeRegex);\n    return matches || [];\n};\nvar detectHttp = /(http(s?):\\/\\/)?(www\\.)?/;\nfunction formatUrlForDisplay(url) {\n    try {\n        return decodeURIComponent(url).replace(detectHttp, '');\n    }\n    catch (e) {\n        return url;\n    }\n}\nfunction encodeDecode(url) {\n    try {\n        return encodeURI(decodeURIComponent(url));\n    }\n    catch (error) {\n        return url;\n    }\n}\nvar Anchor = function (_a) {\n    var children = _a.children, href = _a.href;\n    var isEmail = href === null || href === void 0 ? void 0 : href.startsWith('mailto:');\n    var isUrl = href === null || href === void 0 ? void 0 : href.startsWith('http');\n    if (!href || (!isEmail && !isUrl))\n        return React.createElement(React.Fragment, null, children);\n    return (React.createElement(\"a\", { className: clsx({ 'str-chat__message-url-link': isUrl }), href: href, rel: 'nofollow noreferrer noopener', target: '_blank' }, children));\n};\nvar Emoji = function (_a) {\n    var children = _a.children;\n    return (React.createElement(\"span\", { className: 'inline-text-emoji', \"data-testid\": 'inline-text-emoji' }, children));\n};\nvar Mention = function (_a) {\n    var children = _a.children, mentionedUser = _a.node.mentionedUser;\n    return (React.createElement(\"span\", { className: 'str-chat__message-mention', \"data-user-id\": mentionedUser.id }, children));\n};\nexport var markDownRenderers = {\n    a: Anchor,\n    emoji: Emoji,\n    mention: Mention,\n};\nexport var emojiMarkdownPlugin = function () {\n    var replace = function (match) {\n        return u('element', { tagName: 'emoji' }, [u('text', match)]);\n    };\n    var transform = function (node) { return findAndReplace(node, emojiRegex(), replace); };\n    return transform;\n};\nexport var mentionsMarkdownPlugin = function (mentioned_users) { return function () {\n    var mentioned_usernames = mentioned_users\n        .map(function (user) { return user.name || user.id; })\n        .filter(Boolean)\n        .map(escapeRegExp);\n    var mentionedUsersRegex = new RegExp(mentioned_usernames.map(function (username) { return \"@\".concat(username); }).join('|'), 'g');\n    var replace = function (match) {\n        var usernameOrId = match.replace('@', '');\n        var user = mentioned_users.find(function (_a) {\n            var id = _a.id, name = _a.name;\n            return name === usernameOrId || id === usernameOrId;\n        });\n        return u('element', { mentionedUser: user, tagName: 'mention' }, [u('text', match)]);\n    };\n    var transform = function (tree) {\n        if (!mentioned_usernames.length)\n            return tree;\n        // handles special cases of mentions where user.name is an e-mail\n        // Remark GFM translates all e-mail-like text nodes to links creating\n        // two separate child nodes \"@\" and \"your.name@as.email\" instead of\n        // keeping it as one text node with value \"@your.name@as.email\"\n        // this piece finds these two separated nodes and merges them together\n        // before \"replace\" function takes over\n        visit(tree, function (node, index, parent) {\n            var _a;\n            if (index === null)\n                return;\n            if (!parent)\n                return;\n            var nextChild = parent.children.at(index + 1);\n            var nextChildHref = (_a = nextChild === null || nextChild === void 0 ? void 0 : nextChild.properties) === null || _a === void 0 ? void 0 : _a.href;\n            if (node.type === 'text' &&\n                // text value has to have @ sign at the end of the string\n                // and no other characters except whitespace can precede it\n                // valid cases:   \"text @\", \"@\", \" @\"\n                // invalid cases: \"text@\", \"@text\",\n                /.?\\s?@$|^@$/.test(node.value) &&\n                (nextChildHref === null || nextChildHref === void 0 ? void 0 : nextChildHref.startsWith('mailto:'))) {\n                var newTextValue = node.value.replace(/@$/, '');\n                var username = nextChildHref.replace('mailto:', '');\n                parent.children[index] = u('text', newTextValue);\n                parent.children[index + 1] = u('text', \"@\".concat(username));\n            }\n        });\n        return findAndReplace(tree, mentionedUsersRegex, replace);\n    };\n    return transform;\n}; };\nexport var renderText = function (text, mentionedUsers, _a) {\n    var _b = _a === void 0 ? {} : _a, customMarkDownRenderers = _b.customMarkDownRenderers;\n    // take the @ mentions and turn them into markdown?\n    // translate links\n    if (!text)\n        return null;\n    if (text.trim().length === 1)\n        return React.createElement(React.Fragment, null, text);\n    var newText = text;\n    var markdownLinks = matchMarkdownLinks(newText);\n    var codeBlocks = messageCodeBlocks(newText);\n    // extract all valid links/emails within text and replace it with proper markup\n    uniqBy(__spreadArray(__spreadArray([], find(newText, 'email'), true), find(newText, 'url'), true), 'value').forEach(function (_a) {\n        var href = _a.href, type = _a.type, value = _a.value;\n        var linkIsInBlock = codeBlocks.some(function (block) { return block === null || block === void 0 ? void 0 : block.includes(value); });\n        // check if message is already  markdown\n        var noParsingNeeded = markdownLinks &&\n            markdownLinks.filter(function (text) {\n                var strippedHref = href === null || href === void 0 ? void 0 : href.replace(detectHttp, '');\n                var strippedText = text === null || text === void 0 ? void 0 : text.replace(detectHttp, '');\n                if (!strippedHref || !strippedText)\n                    return false;\n                return strippedHref.includes(strippedText) || strippedText.includes(strippedHref);\n            });\n        if (noParsingNeeded.length > 0 || linkIsInBlock)\n            return;\n        try {\n            // special case for mentions:\n            // it could happen that a user's name matches with an e-mail format pattern.\n            // in that case, we check whether the found e-mail is actually a mention\n            // by naively checking for an existence of @ sign in front of it.\n            if (type === 'email' && mentionedUsers) {\n                var emailMatchesWithName = mentionedUsers.some(function (u) { return u.name === value; });\n                if (emailMatchesWithName) {\n                    newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), function (match, position) {\n                        var isMention = newText.charAt(position - 1) === '@';\n                        // in case of mention, we leave the match in its original form,\n                        // and we let `mentionsMarkdownPlugin` to do its job\n                        return isMention ? match : \"[\".concat(match, \"](\").concat(encodeDecode(href), \")\");\n                    });\n                    return;\n                }\n            }\n            var displayLink = type === 'email' ? value : formatUrlForDisplay(href);\n            newText = newText.replace(new RegExp(escapeRegExp(value), 'g'), \"[\".concat(displayLink, \"](\").concat(encodeDecode(href), \")\"));\n        }\n        catch (e) {\n            void e;\n        }\n    });\n    var rehypePlugins = [emojiMarkdownPlugin];\n    if (mentionedUsers === null || mentionedUsers === void 0 ? void 0 : mentionedUsers.length) {\n        rehypePlugins.push(mentionsMarkdownPlugin(mentionedUsers));\n    }\n    // TODO: remove in the next major release\n    if (customMarkDownRenderers === null || customMarkDownRenderers === void 0 ? void 0 : customMarkDownRenderers.mention) {\n        var MentionComponent_1 = customMarkDownRenderers['mention'];\n        // eslint-disable-next-line react/display-name\n        customMarkDownRenderers['mention'] = function (_a) {\n            var node = _a.node, rest = __rest(_a, [\"node\"]);\n            return (React.createElement(MentionComponent_1\n            // @ts-ignore\n            , __assign({ \n                // @ts-ignore\n                mentioned_user: node.mentionedUser, \n                // @ts-ignore\n                node: __assign({ mentioned_user: node.mentionedUser }, node) }, rest)));\n        };\n    }\n    var rehypeComponents = __assign(__assign({}, markDownRenderers), customMarkDownRenderers);\n    return (React.createElement(ReactMarkdown, { allowedElements: allowedMarkups, components: rehypeComponents, rehypePlugins: rehypePlugins, remarkPlugins: [[remarkGfm, { singleTilde: false }]], skipHtml: true, transformLinkUri: function (uri) { return (uri.startsWith('app://') ? uri : uriTransformer(uri)); }, unwrapDisallowed: true }, newText));\n};\nexport function escapeRegExp(text) {\n    return text.replace(/[-[\\]{}()*+?.,/\\\\^$|#]/g, '\\\\$&');\n}\n/**\n * @deprecated will be removed in the next major release\n */\nexport var generateRandomId = nanoid;\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charAt#getting_whole_characters\nexport var getWholeChar = function (str, i) {\n    var code = str.charCodeAt(i);\n    if (Number.isNaN(code))\n        return '';\n    if (code < 0xd800 || code > 0xdfff)\n        return str.charAt(i);\n    if (0xd800 <= code && code <= 0xdbff) {\n        if (str.length <= i + 1) {\n            throw 'High surrogate without following low surrogate';\n        }\n        var next = str.charCodeAt(i + 1);\n        if (0xdc00 > next || next > 0xdfff) {\n            throw 'High surrogate without following low surrogate';\n        }\n        return str.charAt(i) + str.charAt(i + 1);\n    }\n    if (i === 0) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n    if (0xd800 > prev || prev > 0xdbff) {\n        throw 'Low surrogate without preceding high surrogate';\n    }\n    return '';\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}