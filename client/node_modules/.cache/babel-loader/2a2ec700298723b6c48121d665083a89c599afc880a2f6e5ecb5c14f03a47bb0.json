{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { useChannelActionContext } from '../../../context/ChannelActionContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var handleActionWarning = \"Action handler was called, but it is missing one of its required arguments. \\nMake sure the ChannelAction and ChannelState contexts are properly set and the hook is initialized with a valid message.\";\nexport function useActionHandler(message) {\n  var _this = this;\n  var _a = useChannelActionContext('useActionHandler'),\n    removeMessage = _a.removeMessage,\n    updateMessage = _a.updateMessage;\n  var channel = useChannelStateContext('useActionHandler').channel;\n  return function (dataOrName, value, event) {\n    return __awaiter(_this, void 0, void 0, function () {\n      var messageID, formData, data;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (event) event.preventDefault();\n            if (!message || !updateMessage || !removeMessage || !channel) {\n              console.warn(handleActionWarning);\n              return [2 /*return*/];\n            }\n\n            messageID = message.id;\n            formData = {};\n            // deprecated: value&name should be removed in favor of data obj\n            if (typeof dataOrName === 'string') {\n              formData[dataOrName] = value;\n            } else {\n              formData = __assign({}, dataOrName);\n            }\n            if (!messageID) return [3 /*break*/, 2];\n            return [4 /*yield*/, channel.sendAction(messageID, formData)];\n          case 1:\n            data = _a.sent();\n            if (data === null || data === void 0 ? void 0 : data.message) {\n              updateMessage(data.message);\n            } else {\n              removeMessage(message);\n            }\n            _a.label = 2;\n          case 2:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n}","map":{"version":3,"names":["__assign","__awaiter","__generator","useChannelActionContext","useChannelStateContext","handleActionWarning","useActionHandler","message","_this","_a","removeMessage","updateMessage","channel","dataOrName","value","event","messageID","formData","data","label","preventDefault","console","warn","id","sendAction","sent"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/components/Message/hooks/useActionHandler.js"],"sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { useChannelActionContext } from '../../../context/ChannelActionContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nexport var handleActionWarning = \"Action handler was called, but it is missing one of its required arguments. \\nMake sure the ChannelAction and ChannelState contexts are properly set and the hook is initialized with a valid message.\";\nexport function useActionHandler(message) {\n    var _this = this;\n    var _a = useChannelActionContext('useActionHandler'), removeMessage = _a.removeMessage, updateMessage = _a.updateMessage;\n    var channel = useChannelStateContext('useActionHandler').channel;\n    return function (dataOrName, value, event) { return __awaiter(_this, void 0, void 0, function () {\n        var messageID, formData, data;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (event)\n                        event.preventDefault();\n                    if (!message || !updateMessage || !removeMessage || !channel) {\n                        console.warn(handleActionWarning);\n                        return [2 /*return*/];\n                    }\n                    messageID = message.id;\n                    formData = {};\n                    // deprecated: value&name should be removed in favor of data obj\n                    if (typeof dataOrName === 'string') {\n                        formData[dataOrName] = value;\n                    }\n                    else {\n                        formData = __assign({}, dataOrName);\n                    }\n                    if (!messageID) return [3 /*break*/, 2];\n                    return [4 /*yield*/, channel.sendAction(messageID, formData)];\n                case 1:\n                    data = _a.sent();\n                    if (data === null || data === void 0 ? void 0 : data.message) {\n                        updateMessage(data.message);\n                    }\n                    else {\n                        removeMessage(message);\n                    }\n                    _a.label = 2;\n                case 2: return [2 /*return*/];\n            }\n        });\n    }); };\n}\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,uBAAuB,QAAQ,uCAAuC;AAC/E,SAASC,sBAAsB,QAAQ,sCAAsC;AAC7E,OAAO,IAAIC,mBAAmB,GAAG,wMAAwM;AACzO,OAAO,SAASC,gBAAgBA,CAACC,OAAO,EAAE;EACtC,IAAIC,KAAK,GAAG,IAAI;EAChB,IAAIC,EAAE,GAAGN,uBAAuB,CAAC,kBAAkB,CAAC;IAAEO,aAAa,GAAGD,EAAE,CAACC,aAAa;IAAEC,aAAa,GAAGF,EAAE,CAACE,aAAa;EACxH,IAAIC,OAAO,GAAGR,sBAAsB,CAAC,kBAAkB,CAAC,CAACQ,OAAO;EAChE,OAAO,UAAUC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAE;IAAE,OAAOd,SAAS,CAACO,KAAK,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,YAAY;MAC7F,IAAIQ,SAAS,EAAEC,QAAQ,EAAEC,IAAI;MAC7B,OAAOhB,WAAW,CAAC,IAAI,EAAE,UAAUO,EAAE,EAAE;QACnC,QAAQA,EAAE,CAACU,KAAK;UACZ,KAAK,CAAC;YACF,IAAIJ,KAAK,EACLA,KAAK,CAACK,cAAc,CAAC,CAAC;YAC1B,IAAI,CAACb,OAAO,IAAI,CAACI,aAAa,IAAI,CAACD,aAAa,IAAI,CAACE,OAAO,EAAE;cAC1DS,OAAO,CAACC,IAAI,CAACjB,mBAAmB,CAAC;cACjC,OAAO,CAAC,CAAC,CAAC,WAAW;YACzB;;YACAW,SAAS,GAAGT,OAAO,CAACgB,EAAE;YACtBN,QAAQ,GAAG,CAAC,CAAC;YACb;YACA,IAAI,OAAOJ,UAAU,KAAK,QAAQ,EAAE;cAChCI,QAAQ,CAACJ,UAAU,CAAC,GAAGC,KAAK;YAChC,CAAC,MACI;cACDG,QAAQ,GAAGjB,QAAQ,CAAC,CAAC,CAAC,EAAEa,UAAU,CAAC;YACvC;YACA,IAAI,CAACG,SAAS,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;YACvC,OAAO,CAAC,CAAC,CAAC,WAAWJ,OAAO,CAACY,UAAU,CAACR,SAAS,EAAEC,QAAQ,CAAC,CAAC;UACjE,KAAK,CAAC;YACFC,IAAI,GAAGT,EAAE,CAACgB,IAAI,CAAC,CAAC;YAChB,IAAIP,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACX,OAAO,EAAE;cAC1DI,aAAa,CAACO,IAAI,CAACX,OAAO,CAAC;YAC/B,CAAC,MACI;cACDG,aAAa,CAACH,OAAO,CAAC;YAC1B;YACAE,EAAE,CAACU,KAAK,GAAG,CAAC;UAChB,KAAK,CAAC;YAAE,OAAO,CAAC,CAAC,CAAC,WAAW;QACjC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EAAE,CAAC;AACT"},"metadata":{},"sourceType":"module","externalDependencies":[]}