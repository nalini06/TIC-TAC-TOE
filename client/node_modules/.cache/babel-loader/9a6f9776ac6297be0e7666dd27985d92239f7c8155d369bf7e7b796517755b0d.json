{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport { useCallback } from 'react';\nimport { dataTransferItemsHaveFiles, dataTransferItemsToFiles } from '../../ReactFileUtilities';\nimport { SetLinkPreviewMode } from '../types';\nexport var usePasteHandler = function (uploadNewFiles, insertText, isUploadEnabled, findAndEnqueueURLsToEnrich) {\n  var onPaste = useCallback(function (clipboardEvent) {\n    if (!isUploadEnabled) return;\n    (function (event) {\n      return __awaiter(void 0, void 0, void 0, function () {\n        var items, plainTextPromise, _loop_1, i, state_1, fileLikes, pastedText;\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              items = event.clipboardData.items;\n              if (!dataTransferItemsHaveFiles(Array.from(items))) return [2 /*return*/];\n              event.preventDefault();\n              plainTextPromise = undefined;\n              _loop_1 = function (i) {\n                var item = items[i];\n                if (item.kind === 'string' && item.type === 'text/plain') {\n                  plainTextPromise = new Promise(function (resolve) {\n                    item.getAsString(function (string) {\n                      resolve(string);\n                    });\n                  });\n                  return \"break\";\n                }\n              };\n              for (i = 0; i < items.length; i++) {\n                state_1 = _loop_1(i);\n                if (state_1 === \"break\") break;\n              }\n              return [4 /*yield*/, dataTransferItemsToFiles(Array.from(items))];\n            case 1:\n              fileLikes = _a.sent();\n              if (fileLikes.length) {\n                uploadNewFiles(fileLikes);\n                return [2 /*return*/];\n              }\n\n              if (!plainTextPromise) return [3 /*break*/, 3];\n              return [4 /*yield*/, plainTextPromise];\n            case 2:\n              pastedText = _a.sent();\n              insertText(pastedText);\n              findAndEnqueueURLsToEnrich === null || findAndEnqueueURLsToEnrich === void 0 ? void 0 : findAndEnqueueURLsToEnrich(pastedText, SetLinkPreviewMode.UPSERT);\n              findAndEnqueueURLsToEnrich === null || findAndEnqueueURLsToEnrich === void 0 ? void 0 : findAndEnqueueURLsToEnrich.flush();\n              _a.label = 3;\n            case 3:\n              return [2 /*return*/];\n          }\n        });\n      });\n    })(clipboardEvent);\n  }, [insertText, uploadNewFiles]);\n  return {\n    onPaste: onPaste\n  };\n};","map":{"version":3,"names":["__awaiter","__generator","useCallback","dataTransferItemsHaveFiles","dataTransferItemsToFiles","SetLinkPreviewMode","usePasteHandler","uploadNewFiles","insertText","isUploadEnabled","findAndEnqueueURLsToEnrich","onPaste","clipboardEvent","event","items","plainTextPromise","_loop_1","i","state_1","fileLikes","pastedText","_a","label","clipboardData","Array","from","preventDefault","undefined","item","kind","type","Promise","resolve","getAsString","string","length","sent","UPSERT","flush"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/components/MessageInput/hooks/usePasteHandler.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\nimport { useCallback } from 'react';\nimport { dataTransferItemsHaveFiles, dataTransferItemsToFiles, } from '../../ReactFileUtilities';\nimport { SetLinkPreviewMode } from '../types';\nexport var usePasteHandler = function (uploadNewFiles, insertText, isUploadEnabled, findAndEnqueueURLsToEnrich) {\n    var onPaste = useCallback(function (clipboardEvent) {\n        if (!isUploadEnabled)\n            return;\n        (function (event) { return __awaiter(void 0, void 0, void 0, function () {\n            var items, plainTextPromise, _loop_1, i, state_1, fileLikes, pastedText;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        items = event.clipboardData.items;\n                        if (!dataTransferItemsHaveFiles(Array.from(items)))\n                            return [2 /*return*/];\n                        event.preventDefault();\n                        plainTextPromise = undefined;\n                        _loop_1 = function (i) {\n                            var item = items[i];\n                            if (item.kind === 'string' && item.type === 'text/plain') {\n                                plainTextPromise = new Promise(function (resolve) {\n                                    item.getAsString(function (string) {\n                                        resolve(string);\n                                    });\n                                });\n                                return \"break\";\n                            }\n                        };\n                        for (i = 0; i < items.length; i++) {\n                            state_1 = _loop_1(i);\n                            if (state_1 === \"break\")\n                                break;\n                        }\n                        return [4 /*yield*/, dataTransferItemsToFiles(Array.from(items))];\n                    case 1:\n                        fileLikes = _a.sent();\n                        if (fileLikes.length) {\n                            uploadNewFiles(fileLikes);\n                            return [2 /*return*/];\n                        }\n                        if (!plainTextPromise) return [3 /*break*/, 3];\n                        return [4 /*yield*/, plainTextPromise];\n                    case 2:\n                        pastedText = _a.sent();\n                        insertText(pastedText);\n                        findAndEnqueueURLsToEnrich === null || findAndEnqueueURLsToEnrich === void 0 ? void 0 : findAndEnqueueURLsToEnrich(pastedText, SetLinkPreviewMode.UPSERT);\n                        findAndEnqueueURLsToEnrich === null || findAndEnqueueURLsToEnrich === void 0 ? void 0 : findAndEnqueueURLsToEnrich.flush();\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); })(clipboardEvent);\n    }, [insertText, uploadNewFiles]);\n    return { onPaste: onPaste };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}