{"ast":null,"code":"import { __assign, __awaiter, __generator } from \"tslib\";\nimport { defaultPinPermissions, validateAndGetMessage } from '../utils';\nimport { useChannelActionContext } from '../../../context/ChannelActionContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\nexport var usePinHandler = function (message,\n// @deprecated in favor of `channelCapabilities` - TODO: remove in next major release\n_permissions,\n// eslint-disable-line\nnotifications) {\n  if (_permissions === void 0) {\n    _permissions = defaultPinPermissions;\n  }\n  if (notifications === void 0) {\n    notifications = {};\n  }\n  var getErrorNotification = notifications.getErrorNotification,\n    notify = notifications.notify;\n  var updateMessage = useChannelActionContext('usePinHandler').updateMessage;\n  var _a = useChannelStateContext('usePinHandler').channelCapabilities,\n    channelCapabilities = _a === void 0 ? {} : _a;\n  var client = useChatContext('usePinHandler').client;\n  var t = useTranslationContext('usePinHandler').t;\n  var canPin = !!channelCapabilities['pin-message'];\n  var handlePin = function (event) {\n    return __awaiter(void 0, void 0, void 0, function () {\n      var optimisticMessage, e_1, errorMessage, optimisticMessage, e_2, errorMessage;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            event.preventDefault();\n            if (!message) return [2 /*return*/];\n            if (!!message.pinned) return [3 /*break*/, 5];\n            _a.label = 1;\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n            optimisticMessage = __assign(__assign({}, message), {\n              pinned: true,\n              pinned_at: new Date(),\n              pinned_by: client.user\n            });\n            updateMessage(optimisticMessage);\n            return [4 /*yield*/, client.pinMessage(message)];\n          case 2:\n            _a.sent();\n            return [3 /*break*/, 4];\n          case 3:\n            e_1 = _a.sent();\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            if (notify) notify(errorMessage || t('Error pinning message'), 'error');\n            updateMessage(message);\n            return [3 /*break*/, 4];\n          case 4:\n            return [3 /*break*/, 8];\n          case 5:\n            _a.trys.push([5, 7,, 8]);\n            optimisticMessage = __assign(__assign({}, message), {\n              pin_expires: null,\n              pinned: false,\n              pinned_at: null,\n              pinned_by: null\n            });\n            updateMessage(optimisticMessage);\n            return [4 /*yield*/, client.unpinMessage(message)];\n          case 6:\n            _a.sent();\n            return [3 /*break*/, 8];\n          case 7:\n            e_2 = _a.sent();\n            errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n            if (notify) notify(errorMessage || t('Error removing message pin'), 'error');\n            updateMessage(message);\n            return [3 /*break*/, 8];\n          case 8:\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  return {\n    canPin: canPin,\n    handlePin: handlePin\n  };\n};","map":{"version":3,"names":["__assign","__awaiter","__generator","defaultPinPermissions","validateAndGetMessage","useChannelActionContext","useChannelStateContext","useChatContext","useTranslationContext","usePinHandler","message","_permissions","notifications","getErrorNotification","notify","updateMessage","_a","channelCapabilities","client","t","canPin","handlePin","event","optimisticMessage","e_1","errorMessage","e_2","label","preventDefault","pinned","trys","push","pinned_at","Date","pinned_by","user","pinMessage","sent","pin_expires","unpinMessage"],"sources":["C:/Users/praka/OneDrive/Desktop/Tic-Tac-Toe/client/node_modules/stream-chat-react/dist/components/Message/hooks/usePinHandler.js"],"sourcesContent":["import { __assign, __awaiter, __generator } from \"tslib\";\nimport { defaultPinPermissions, validateAndGetMessage } from '../utils';\nimport { useChannelActionContext } from '../../../context/ChannelActionContext';\nimport { useChannelStateContext } from '../../../context/ChannelStateContext';\nimport { useChatContext } from '../../../context/ChatContext';\nimport { useTranslationContext } from '../../../context/TranslationContext';\nexport var usePinHandler = function (message, \n// @deprecated in favor of `channelCapabilities` - TODO: remove in next major release\n_permissions, // eslint-disable-line\nnotifications) {\n    if (_permissions === void 0) { _permissions = defaultPinPermissions; }\n    if (notifications === void 0) { notifications = {}; }\n    var getErrorNotification = notifications.getErrorNotification, notify = notifications.notify;\n    var updateMessage = useChannelActionContext('usePinHandler').updateMessage;\n    var _a = useChannelStateContext('usePinHandler').channelCapabilities, channelCapabilities = _a === void 0 ? {} : _a;\n    var client = useChatContext('usePinHandler').client;\n    var t = useTranslationContext('usePinHandler').t;\n    var canPin = !!channelCapabilities['pin-message'];\n    var handlePin = function (event) { return __awaiter(void 0, void 0, void 0, function () {\n        var optimisticMessage, e_1, errorMessage, optimisticMessage, e_2, errorMessage;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    event.preventDefault();\n                    if (!message)\n                        return [2 /*return*/];\n                    if (!!message.pinned) return [3 /*break*/, 5];\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    optimisticMessage = __assign(__assign({}, message), { pinned: true, pinned_at: new Date(), pinned_by: client.user });\n                    updateMessage(optimisticMessage);\n                    return [4 /*yield*/, client.pinMessage(message)];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    e_1 = _a.sent();\n                    errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n                    if (notify)\n                        notify(errorMessage || t('Error pinning message'), 'error');\n                    updateMessage(message);\n                    return [3 /*break*/, 4];\n                case 4: return [3 /*break*/, 8];\n                case 5:\n                    _a.trys.push([5, 7, , 8]);\n                    optimisticMessage = __assign(__assign({}, message), { pin_expires: null, pinned: false, pinned_at: null, pinned_by: null });\n                    updateMessage(optimisticMessage);\n                    return [4 /*yield*/, client.unpinMessage(message)];\n                case 6:\n                    _a.sent();\n                    return [3 /*break*/, 8];\n                case 7:\n                    e_2 = _a.sent();\n                    errorMessage = getErrorNotification && validateAndGetMessage(getErrorNotification, [message]);\n                    if (notify)\n                        notify(errorMessage || t('Error removing message pin'), 'error');\n                    updateMessage(message);\n                    return [3 /*break*/, 8];\n                case 8: return [2 /*return*/];\n            }\n        });\n    }); };\n    return { canPin: canPin, handlePin: handlePin };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}